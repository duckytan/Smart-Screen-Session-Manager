# âœ… æ­£ç¡®çš„å¤šç”¨æˆ·Screenè¿æ¥æ–¹æ³•

## ğŸ¯ æ‚¨çš„å‘ç°å®Œå…¨æ­£ç¡®ï¼

**é—®é¢˜**ï¼š`screen -S "dev-å¼€å‘ç¯å¢ƒ"` ä¸ä¼šè¿›å…¥åŸæœ‰ä¼šè¯ï¼Œè€Œæ˜¯åˆ›å»ºæ–°ä¼šè¯

**åŸå› **ï¼šScreenå‘½ä»¤çš„è¡Œä¸ºå–å†³äºä¼šè¯çŠ¶æ€å’Œè¿æ¥æ–¹å¼

## ğŸ“‹ æ­£ç¡®çš„å¤šç”¨æˆ·è¿æ¥æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨ `screen -r`ï¼ˆæ¨èï¼‰

```bash
# æ­¥éª¤1: åˆ›å»ºä¼šè¯ï¼ˆåˆ†ç¦»æ¨¡å¼ï¼‰
screen -S "dev-å¼€å‘ç¯å¢ƒ" -d -m bash

# æ­¥éª¤2: è¿æ¥ä¼šè¯
screen -r "dev-å¼€å‘ç¯å¢ƒ"
```

### æ–¹æ³•2ï¼šä½¿ç”¨ `screen -dRR`ï¼ˆå¼ºåˆ¶é‡æ–°è¿æ¥ï¼‰

```bash
# æ­¥éª¤1: åˆ›å»ºä¼šè¯ï¼ˆåˆ†ç¦»æ¨¡å¼ï¼‰
screen -S "dev-å¼€å‘ç¯å¢ƒ" -d -m bash

# æ­¥éª¤2: è¿æ¥ä¼šè¯ï¼ˆå¼ºåˆ¶ï¼‰
screen -dRR "dev-å¼€å‘ç¯å¢ƒ"
```

### æ–¹æ³•3ï¼šé€šè¿‡å¤šç”¨æˆ·æ¨¡å¼ï¼ˆçœŸæ­£å¤šç”¨æˆ·ï¼‰

```bash
# æ­¥éª¤1: åˆ›å»ºä¼šè¯
screen -S "dev-å¼€å‘ç¯å¢ƒ" -d -m bash
sleep 1

# æ­¥éª¤2: å¯ç”¨å¤šç”¨æˆ·
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X multiuser on

# æ­¥éª¤3: æ·»åŠ æƒé™
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X acladd alice
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X acladd bob

# æ­¥éª¤4: ç”¨æˆ·è¿æ¥
# Aç”¨æˆ·:
screen -r "dev-å¼€å‘ç¯å¢ƒ"

# Bç”¨æˆ·:
screen -r "dev-å¼€å‘ç¯å¢ƒ"
```

## ğŸ” å‘½ä»¤åŒºåˆ«

| å‘½ä»¤ | ç”¨é€” | è¡Œä¸º |
|------|------|------|
| `screen -S <name>` | åˆ›å»ºæˆ–è¿æ¥ä¼šè¯ | å¦‚æœä¼šè¯å­˜åœ¨ä¸”detachedï¼Œè¿æ¥å®ƒï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°ä¼šè¯ |
| `screen -S <name> -d -m` | åˆ›å»ºåˆ†ç¦»ä¼šè¯ | åˆ›å»ºæ–°ä¼šè¯å¹¶ç«‹å³åˆ†ç¦» |
| `screen -r <name>` | æ¢å¤ä¼šè¯ | è¿æ¥åˆ°detachedçš„ä¼šè¯ |
| `screen -dRR <name>` | å¼ºåˆ¶æ¢å¤ | å…ˆdetachå…¶ä»–è¿æ¥ï¼Œç„¶åè¿æ¥ |

## ğŸ¯ å¤šç”¨æˆ·æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»ºå¤šç”¨æˆ·ä¼šè¯

```bash
./create_single_session.sh "dev-å¼€å‘ç¯å¢ƒ" alice bob
```

### æ­¥éª¤2ï¼šè¿æ¥æµ‹è¯•

**ç»ˆç«¯A**ï¼š
```bash
screen -r "dev-å¼€å‘ç¯å¢ƒ"
# è¾“å…¥ï¼šecho "Hello from Terminal A"
# æŒ‰ï¼šCtrl+A D é€€å‡º
```

**ç»ˆç«¯B**ï¼š
```bash
screen -r "dev-å¼€å‘ç¯å¢ƒ"
# åº”è¯¥çœ‹åˆ° "Hello from Terminal A"
# è¾“å…¥ï¼šecho "Hello from Terminal B"
# æŒ‰ï¼šCtrl+A D é€€å‡º
```

**éªŒè¯**ï¼š
å†æ¬¡è¿æ¥åº”è¯¥èƒ½çœ‹åˆ°ä¸¤ä¸ªè¾“å‡ºï¼š
```bash
screen -r "dev-å¼€å‘ç¯å¢ƒ"
# åº”è¯¥æ˜¾ç¤ºï¼š
# Hello from Terminal A
# Hello from Terminal B
```

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. åˆ›å»ºä¼šè¯æ—¶å¿…é¡»ä½¿ç”¨ `-d -m`

```bash
# âœ… æ­£ç¡®ï¼ˆåˆ›å»ºåˆ†ç¦»ä¼šè¯ï¼‰
screen -S "dev-å¼€å‘ç¯å¢ƒ" -d -m bash

# âŒ é”™è¯¯ï¼ˆä¼šè¯AttachedçŠ¶æ€ï¼Œå…¶ä»–ç”¨æˆ·æ— æ³•è¿æ¥ï¼‰
screen -S "dev-å¼€å‘ç¯å¢ƒ" bash
```

### 2. è¿æ¥æ—¶ä½¿ç”¨ `-r` è€Œä¸æ˜¯ `-S`

```bash
# âœ… æ­£ç¡®
screen -r "dev-å¼€å‘ç¯å¢ƒ"

# âŒ é”™è¯¯ï¼ˆå¯èƒ½åˆ›å»ºæ–°ä¼šè¯ï¼‰
screen -S "dev-å¼€å‘ç¯å¢ƒ"
```

### 3. éªŒè¯ä¼šè¯çŠ¶æ€

```bash
screen -list | grep "dev-å¼€å‘ç¯å¢ƒ"
```

åº”è¯¥æ˜¾ç¤ºï¼š
```
738836.dev-å¼€å‘ç¯å¢ƒ    (Multi, detached)
```

æ³¨æ„ï¼š**å¿…é¡»æ˜¯ `detached` çŠ¶æ€ï¼**

## ğŸ§ª å®Œæ•´æµ‹è¯•

```bash
# 1. æ¸…ç†æ—§ä¼šè¯
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X quit 2>/dev/null || true
sleep 1

# 2. åˆ›å»ºå¤šç”¨æˆ·ä¼šè¯
./create_single_session.sh "dev-å¼€å‘ç¯å¢ƒ" alice bob

# 3. éªŒè¯ä¼šè¯çŠ¶æ€
screen -list | grep "dev-å¼€å‘ç¯å¢ƒ"

# 4. ç»ˆç«¯Aè¿æ¥
screen -r "dev-å¼€å‘ç¯å¢ƒ"
# è¾“å…¥ï¼šecho "Test from A"
# Ctrl+A D

# 5. ç»ˆç«¯Bè¿æ¥
screen -r "dev-å¼€å‘ç¯å¢ƒ"
# åº”è¯¥çœ‹åˆ° "Test from A"
# è¾“å…¥ï¼šecho "Test from B"
# Ctrl+A D

# 6. éªŒè¯å…±äº«
screen -r "dev-å¼€å‘ç¯å¢ƒ"
# åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªè¾“å‡º
```

## ğŸ‰ æ€»ç»“

âœ… **æ‚¨çš„å‘ç°æ­£ç¡®**  
âœ… **`screen -S` ä¼šåˆ›å»ºæ–°ä¼šè¯**  
âœ… **åº”è¯¥ä½¿ç”¨ `screen -r` è¿æ¥**  
âœ… **åˆ›å»ºæ—¶å¿…é¡»ç”¨ `-d -m`**  

**æœ€ç»ˆå‘½ä»¤**ï¼š
```bash
# åˆ›å»º
screen -S "dev-å¼€å‘ç¯å¢ƒ" -d -m bash

# è¿æ¥
screen -r "dev-å¼€å‘ç¯å¢ƒ"
```
