# Smart Screen Session Manager - è‡ªåŠ¨å¯åŠ¨é…ç½®æŒ‡å—

## æ¦‚è¿°
ä¸ºäº†è®© Smart Screen Session Manager åœ¨æ¯æ¬¡ SSH ç™»å½•æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

## æ–¹æ³•ä¸€ï¼šæ·»åŠ åˆ° .bashrcï¼ˆæŽ¨èï¼‰

### æ­¥éª¤ 1ï¼šç¼–è¾‘ .bashrc æ–‡ä»¶
```bash
nano ~/.bashrc
```

### æ­¥éª¤ 2ï¼šåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä»£ç 
```bash
# Smart Screen Session Manager Auto Start
# æ™ºèƒ½Screenä¼šè¯ç®¡ç†å™¨è‡ªåŠ¨å¯åŠ¨

# æ£€æŸ¥æ˜¯å¦ä¸ºäº¤äº’å¼shell
if [[ $- == *i* ]] && [[ -z "$SSH_TTY" ]] && [[ -z "$TMUX" ]]; then
    # èŽ·å–è„šæœ¬è·¯å¾„
    SCRIPT_PATH="/root/smart-screen.sh"

    # æ£€æŸ¥è„šæœ¬æ˜¯å¦å­˜åœ¨ä¸”å¯æ‰§è¡Œ
    if [[ -x "$SCRIPT_PATH" ]]; then
        # æ£€æŸ¥æ˜¯å¦å·²ç»è¿è¡Œè¿‡
        if [[ -z "$SMART_SCREEN_STARTED" ]]; then
            export SMART_SCREEN_STARTED=1

            # è¯¢é—®ç”¨æˆ·æ˜¯å¦è¦å¯åŠ¨Screenä¼šè¯ç®¡ç†å™¨
            echo ""
            echo -e "\033[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\033[0m"
            echo -e "\033[0;36mâ•‘\033[1;37m              æ¬¢è¿Žä½¿ç”¨ Smart Screen Session Manager           \033[0;36mâ•‘\033[0m"
            echo -e "\033[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\033[0m"
            echo ""
            echo -e "\033[0;33mæ˜¯å¦è¦å¯åŠ¨Screenä¼šè¯ç®¡ç†å™¨ï¼Ÿ\033[0m"
            echo -e "  \033[0;32m[1]\033[0m ç«‹å³å¯åŠ¨ï¼ˆæŽ¨èï¼‰"
            echo -e "  \033[0;33m[2]\033[0m ç¨åŽæ‰‹åŠ¨è¿è¡Œ"
            echo ""
            read -p "è¯·è¾“å…¥é€‰æ‹© (1/2): " choice

            if [[ "$choice" == "1" ]]; then
                echo ""
                echo -e "\033[0;32må¯åŠ¨Smart Screen Session Manager...\033[0m"
                sleep 1
                exec "$SCRIPT_PATH"
            else
                echo -e "\033[0;33mæ‚¨å¯ä»¥éšæ—¶è¿è¡Œ: $SCRIPT_PATH\033[0m"
            fi
        fi
    fi
fi
```

### æ­¥éª¤ 3ï¼šé‡æ–°åŠ è½½é…ç½®
```bash
source ~/.bashrc
```

## æ–¹æ³•äºŒï¼šåˆ›å»ºç‹¬ç«‹é…ç½®æ–‡ä»¶

### æ­¥éª¤ 1ï¼šåˆ›å»ºè‡ªåŠ¨å¯åŠ¨è„šæœ¬
```bash
cat > /root/auto_start_screen.sh << 'EOF'
#!/bin/bash
# è‡ªåŠ¨å¯åŠ¨ Smart Screen Session Manager

# æ£€æŸ¥æ˜¯å¦ä¸ºäº¤äº’å¼shell
if [[ $- == *i* ]] && [[ -z "$SSH_TTY" ]] && [[ -z "$TMUX" ]]; then
    SCRIPT_PATH="/root/smart-screen.sh"

    if [[ -x "$SCRIPT_PATH" ]]; then
        if [[ -z "$SMART_SCREEN_STARTED" ]]; then
            export SMART_SCREEN_STARTED=1
            echo ""
            echo -e "\033[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\033[0m"
            echo -e "\033[0;36mâ•‘\033[1;37m              æ¬¢è¿Žä½¿ç”¨ Smart Screen Session Manager           \033[0;36mâ•‘\033[0m"
            echo -e "\033[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\033[0m"
            echo ""
            read -p "æ˜¯å¦å¯åŠ¨Screenä¼šè¯ç®¡ç†å™¨ï¼Ÿ(y/n): " -n 1 -r
            echo ""
            if [[ $REPLY =~ ^[Yy]$ ]]; then
                exec "$SCRIPT_PATH"
            fi
        fi
    fi
fi
EOF
```

### æ­¥éª¤ 2ï¼šè®¾ç½®æƒé™
```bash
chmod +x /root/auto_start_screen.sh
```

### æ­¥éª¤ 3ï¼šåœ¨ .bashrc ä¸­æ·»åŠ 
```bash
nano ~/.bashrc
```

æ·»åŠ ä»¥ä¸‹è¡Œï¼š
```bash
/root/auto_start_screen.sh
```

## æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨è°ƒç”¨ï¼ˆæœ€ç®€å•ï¼‰

å¦‚æžœæ‚¨ä¸æƒ³æ¯æ¬¡ç™»å½•éƒ½è‡ªåŠ¨å¯åŠ¨ï¼Œå¯ä»¥åœ¨ .bashrc ä¸­æ·»åŠ æç¤ºï¼š
```bash
# åœ¨ .bashrc æœ«å°¾æ·»åŠ 
echo ""
echo -e "\033[0;33mðŸ’¡ æç¤ºï¼šè¿è¡Œ \033[0;36m/root/smart-screen.sh\033[0;33m å¯åŠ¨Screenä¼šè¯ç®¡ç†å™¨\033[0m"
```

## åŠŸèƒ½è¯´æ˜Ž

### é¢„è®¾ä¼šè¯ï¼ˆ1-9ï¼‰
- **1-dev** â†’ å¼€å‘çŽ¯å¢ƒ
- **2-test** â†’ æµ‹è¯•çŽ¯å¢ƒ
- **3-prod** â†’ ç”Ÿäº§çŽ¯å¢ƒ
- **4-db** â†’ æ•°æ®åº“
- **5-monitor** â†’ ç›‘æŽ§
- **6-backup** â†’ å¤‡ä»½
- **7-log** â†’ æ—¥å¿—
- **8-debug** â†’ è°ƒè¯•
- **9-research** â†’ ç ”ç©¶

### ä¸»è¦åŠŸèƒ½
1. **è‡ªåŠ¨åˆ›å»º/è¿žæŽ¥** â†’ è¾“å…¥1-9ï¼Œå¦‚æžœä¼šè¯ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå·²å­˜åœ¨åˆ™è¿žæŽ¥
2. **æ˜¾ç¤ºæ‰€æœ‰ä¼šè¯** â†’ è¾“å…¥ `a` æ˜¾ç¤ºæ‰€æœ‰æ´»è·ƒä¼šè¯å¹¶é€‰æ‹©
3. **æ¸…ç†é‡å¤** â†’ è¾“å…¥ `c` æ¸…ç†é‡å¤ä¼šè¯
4. **åˆ é™¤æ‰€æœ‰** â†’ è¾“å…¥ `d` åˆ é™¤æ‰€æœ‰ä¼šè¯ï¼ˆéœ€ç¡®è®¤ï¼‰
5. **ç¼–è¾‘è„šæœ¬** â†’ è¾“å…¥ `e` ç¼–è¾‘è„šæœ¬
6. **å¸®åŠ©ä¿¡æ¯** â†’ è¾“å…¥ `h` æ˜¾ç¤ºå¸®åŠ©
7. **é€€å‡º** â†’ è¾“å…¥ `q` é€€å‡º

### ä½¿ç”¨æŠ€å·§
- æŒ‰ `Ctrl+A` å†æŒ‰ `D` å¯ä»Žscreenä¼šè¯è¿”å›ž
- é¢„è®¾ä¼šè¯ä¼šè‡ªåŠ¨åˆ›å»ºæˆ–è¿žæŽ¥ï¼Œæ— éœ€æ‹…å¿ƒé‡å¤
- æ¯æ¬¡ç™»å½•åŽï¼Œæ‰€æœ‰screenä¼šè¯éƒ½ä¼šä¿æŒè¿è¡ŒçŠ¶æ€

## æ•…éšœæŽ’é™¤

### 1. è„šæœ¬æ²¡æœ‰è‡ªåŠ¨å¯åŠ¨
```bash
# æ£€æŸ¥ .bashrc æ˜¯å¦åŠ è½½
source ~/.bashrc

# æ£€æŸ¥æ˜¯å¦ä¸ºäº¤äº’å¼shell
echo $-
# åº”è¯¥åŒ…å« 'i'

# æ£€æŸ¥è„šæœ¬æ˜¯å¦å­˜åœ¨
ls -l /root/smart-screen.sh
```

### 2. screen å‘½ä»¤ä¸å­˜åœ¨
```bash
# Ubuntu/Debian
sudo apt-get update && sudo apt-get install screen

# CentOS/RHEL
sudo yum install screen

# æˆ–ä½¿ç”¨ dnf (è¾ƒæ–°ç‰ˆæœ¬)
sudo dnf install screen
```

### 3. æƒé™é—®é¢˜
```bash
# ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™
chmod +x /root/smart-screen.sh

# æ£€æŸ¥screenä¼šè¯æƒé™
ls -la /run/screen/
```

## æ³¨æ„äº‹é¡¹
1. ç¡®ä¿åœ¨äº¤äº’å¼shellä¸­è¿è¡Œï¼ˆSSHç™»å½•ï¼‰
2. é¿å…åœ¨ tmux æˆ–å·²æœ‰screenä¼šè¯ä¸­é‡å¤å¯åŠ¨
3. å¦‚æžœä½¿ç”¨å…¶ä»–shellï¼ˆå¦‚ zshã€fishï¼‰ï¼Œè¯·å°†é…ç½®æ·»åŠ åˆ°ç›¸åº”çš„é…ç½®æ–‡ä»¶ä¸­
4. å»ºè®®å…ˆæ‰‹åŠ¨è¿è¡Œè„šæœ¬æµ‹è¯•ï¼Œç¡®è®¤æ— è¯¯åŽå†é…ç½®è‡ªåŠ¨å¯åŠ¨

## å–æ¶ˆè‡ªåŠ¨å¯åŠ¨
å¦‚éœ€å–æ¶ˆè‡ªåŠ¨å¯åŠ¨ï¼Œè¯·ç¼–è¾‘ `.bashrc` æ–‡ä»¶ï¼Œåˆ é™¤æˆ–æ³¨é‡ŠæŽ‰ç›¸åº”çš„ä»£ç è¡Œã€‚
