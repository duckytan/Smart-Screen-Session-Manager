# é¢„è®¾ä¼šè¯å¤šç”¨æˆ·åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

ç°åœ¨ä½ çš„ Smart Screen Session Manager å·²ç»æ”¯æŒå¤šç”¨æˆ·åŠŸèƒ½ï¼å½“ä½ é€šè¿‡é¢„è®¾èœå•ï¼ˆ1-9ï¼‰åˆ›å»ºä¼šè¯æ—¶ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å¯ç”¨å¤šç”¨æˆ·æ¨¡å¼ï¼Œå¹¶æ˜¾ç¤ºè¿æ¥ä¿¡æ¯ã€‚

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. åˆ›å»ºå¤šç”¨æˆ·ä¼šè¯

è¿è¡Œè„šæœ¬å¹¶é€‰æ‹©é¢„è®¾èœå•ï¼š

```bash
./smart-screen.sh
```

ç„¶åé€‰æ‹©è¦åˆ›å»ºçš„ä¼šè¯ï¼ˆä¾‹å¦‚è¾“å…¥ `1` åˆ›å»º dev ä¼šè¯ï¼‰ã€‚

### 2. æŸ¥çœ‹å¤šç”¨æˆ·è¿æ¥ä¿¡æ¯

åˆ›å»ºä¼šè¯åï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼š

```
âœ… ä¼šè¯åˆ›å»ºæˆåŠŸ!
ğŸ“¡ å¤šç”¨æˆ·è¿æ¥ä¿¡æ¯:
  å…¶ä»–ç”¨æˆ·è¿æ¥: screen -S root/dev
  å®Œæ•´æ ¼å¼:     screen -S username/dev

ğŸ” æ·»åŠ ç”¨æˆ·æƒé™:
  æ ¼å¼: screen -S dev -X acladd <username>
  ç¤ºä¾‹: screen -S dev -X acladd alice
  ç¤ºä¾‹: screen -S dev -X acladd bob
```

### 3. æ·»åŠ ç”¨æˆ·æƒé™

å…¶ä»–ç”¨æˆ·è¦è®¿é—®ä½ çš„ä¼šè¯ï¼Œä½ éœ€è¦ç»™ä»–ä»¬æ·»åŠ æƒé™ï¼š

```bash
# æ·»åŠ aliceç”¨æˆ·
screen -S dev -X acladd alice

# æ·»åŠ bobç”¨æˆ·
screen -S dev -X acladd bob
```

### 4. å…¶ä»–ç”¨æˆ·è¿æ¥ä¼šè¯

å…¶ä»–ç”¨æˆ·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿æ¥ï¼š

```bash
# aliceç”¨æˆ·è¿æ¥
screen -S alice/dev

# bobç”¨æˆ·è¿æ¥
screen -S bob/dev
```

---

## ğŸ‘¥ ä½¿ç”¨èœå•ç®¡ç†å¤šç”¨æˆ·æƒé™

è„šæœ¬è¿˜æä¾›äº†èœå•é€‰é¡¹æ¥ç®¡ç†å¤šç”¨æˆ·æƒé™ï¼š

### è®¿é—®å¤šç”¨æˆ·ç®¡ç†èœå•

åœ¨ä¸»èœå•ä¸­é€‰æ‹© `m`ï¼š

```
ç®¡ç†æ“ä½œï¼š
  [a] ğŸ“‹ æ˜¾ç¤ºæ‰€æœ‰æ´»è·ƒä¼šè¯
  [c] ğŸ§¹ æ¸…ç†é‡å¤ä¼šè¯
  [d] ğŸ—‘ï¸ åˆ é™¤æ‰€æœ‰ä¼šè¯
  [k] ğŸ’€ ç»“æŸæŒ‡å®šä¼šè¯
  [m] ğŸ‘¥ å¤šç”¨æˆ·æƒé™ç®¡ç†   â† é€‰æ‹©è¿™ä¸ª
  [e] âœï¸ ç¼–è¾‘è„šæœ¬
```

### ç®¡ç†åŠŸèƒ½

å¤šç”¨æˆ·ç®¡ç†èœå•æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ˜¾ç¤ºå½“å‰æƒé™** - æŸ¥çœ‹ä¼šè¯çš„æƒé™ä¿¡æ¯
2. **æ·»åŠ ç”¨æˆ·æƒé™** - æ·»åŠ æ–°ç”¨æˆ·åˆ°ä¼šè¯
3. **ç§»é™¤ç”¨æˆ·æƒé™** - ç§»é™¤ç”¨æˆ·çš„è®¿é—®æƒé™
4. **ä¿®æ”¹ç”¨æˆ·æƒé™** - æ›´æ”¹ç”¨æˆ·çš„æƒé™çº§åˆ«
5. **å¯ç”¨/ç¦ç”¨å¤šç”¨æˆ·æ¨¡å¼** - ç®¡ç†å¤šç”¨æˆ·æ¨¡å¼çŠ¶æ€

---

## ğŸ’¡ å®Œæ•´ä½¿ç”¨æµç¨‹

### åœºæ™¯ï¼šAlice å’Œ Bob åä½œå¼€å‘

**æ­¥éª¤ 1ï¼šåˆ›å»ºä¼šè¯**

```bash
# è¿è¡Œè„šæœ¬
./smart-screen.sh

# é€‰æ‹© 1 åˆ›å»º dev ä¼šè¯
# è„šæœ¬ä¼šè‡ªåŠ¨å¯ç”¨å¤šç”¨æˆ·æ¨¡å¼
```

**æ­¥éª¤ 2ï¼šæ·»åŠ ç”¨æˆ·æƒé™**

```bash
# ç»™bobæ·»åŠ æƒé™
screen -S dev -X acladd bob
```

**æ­¥éª¤ 3ï¼šBob è¿æ¥ä¼šè¯**

```bash
# bob è¿è¡Œå‘½ä»¤è¿æ¥
screen -S alice/dev

# æˆ–è€…ä½¿ç”¨å½“å‰ç”¨æˆ·å
screen -S root/dev  # å¦‚æœå½“å‰ç”¨æˆ·æ˜¯root
```

**æ­¥éª¤ 4ï¼šéªŒè¯è¿æ¥**

```bash
# æŸ¥çœ‹ä¼šè¯çŠ¶æ€
screen -list

# è¾“å‡ºç±»ä¼¼ï¼š
# There are screens on:
#   12345.dev (Attached)
#   12345.dev (Detached)
```

---

## ğŸ” æƒé™çº§åˆ«

| æƒé™ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `+rwx` | å®Œå…¨æƒé™ | åä½œå¼€å‘ï¼ŒåŒæ–¹éƒ½èƒ½æ“ä½œ |
| `+rw` | è¯»å†™æƒé™ | ç”¨æˆ·å¯ä»¥è¾“å…¥å‘½ä»¤å’Œåˆ›å»ºçª—å£ |
| `+r` | åªè¯»æƒé™ | æ•™å­¦æ¼”ç¤ºï¼Œè§‚å¯Ÿè€…åªèƒ½è§‚çœ‹ |

### è®¾ç½®æƒé™ç¤ºä¾‹

```bash
# å®Œå…¨æƒé™
screen -S dev -X acladd alice +rwx

# è¯»å†™æƒé™
screen -S dev -X acladd bob +rw

# åªè¯»æƒé™
screen -S dev -X acladd charlie +r
```

---

## ğŸ¯ é¢„è®¾ä¼šè¯åˆ—è¡¨

| èœå•é€‰é¡¹ | ä¼šè¯åç§° | æ˜¾ç¤ºåç§° |
|----------|----------|----------|
| 1 | dev | dev-å¼€å‘ç¯å¢ƒ |
| 2 | test | test-æµ‹è¯•ç¯å¢ƒ |
| 3 | prod | prod-ç”Ÿäº§ç¯å¢ƒ |
| 4 | db | db-æ•°æ®åº“ |
| 5 | monitor | monitor-ç›‘æ§ |
| 6 | backup | backup-å¤‡ä»½ |
| 7 | log | log-æ—¥å¿— |
| 8 | debug | debug-è°ƒè¯• |
| 9 | research | research-ç ”ç©¶ |

æ‰€æœ‰é¢„è®¾ä¼šè¯éƒ½æ”¯æŒå¤šç”¨æˆ·åŠŸèƒ½ï¼

---

## ğŸ› æ•…éšœæ’é™¤

### æƒé™è¢«æ‹’ç»

```bash
# ç—‡çŠ¶ï¼šç”¨æˆ·å°è¯•è¿æ¥æ—¶æ”¶åˆ° "Permission denied"

# è§£å†³æ–¹æ¡ˆï¼š
screen -S dev -X acladd username
```

### ä¼šè¯ä¸å­˜åœ¨

```bash
# ç—‡çŠ¶ï¼šæ— æ³•æ‰¾åˆ°ä¼šè¯

# æ£€æŸ¥ä¼šè¯æ˜¯å¦å­˜åœ¨
screen -list

# ç¡®ä¿ä½¿ç”¨æ­£ç¡®æ ¼å¼
screen -S owner/sessionname
```

### ä¼šè¯è¢«å ç”¨

```bash
# ç—‡çŠ¶ï¼šæ— æ³•è¿æ¥åˆ°ä¼šè¯

# è§£å†³æ–¹æ¡ˆï¼š
screen -S owner/sessionname -X detach
```

---

## ğŸ’» å®é™…ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå¼€å‘å›¢é˜Ÿåä½œ

```bash
# å›¢é˜Ÿè´Ÿè´£äººåˆ›å»º dev ä¼šè¯
./smart-screen.sh
# é€‰æ‹© 1

# æ·»åŠ å›¢é˜Ÿæˆå‘˜æƒé™
screen -S dev -X acladd alice +rwx
screen -S dev -X acladd bob +rwx
screen -S dev -X acladd charlie +rwx

# æ‰€æœ‰æˆå‘˜è¿æ¥
screen -S alice/dev  # alice è¿æ¥
screen -S bob/dev    # bob è¿æ¥
screen -S charlie/dev # charlie è¿æ¥
```

### ç¤ºä¾‹ 2ï¼šæ•™å­¦æ¼”ç¤º

```bash
# è€å¸ˆåˆ›å»ºæ¼”ç¤ºä¼šè¯
./smart-screen.sh
# é€‰æ‹© 3 åˆ›å»º prod ä¼šè¯

# æ·»åŠ å­¦ç”Ÿä¸ºåªè¯»æƒé™
screen -S prod -X acladd student1 +r
screen -S prod -X acladd student2 +r
screen -S prod -X acladd student3 +r

# å­¦ç”Ÿè¿æ¥ï¼ˆåªè¯»ï¼‰
screen -S teacher/prod  # student1 è¿æ¥
screen -S teacher/prod  # student2 è¿æ¥
screen -S teacher/prod  # student3 è¿æ¥
```

### ç¤ºä¾‹ 3ï¼šæŠ€æœ¯æ”¯æŒ

```bash
# åˆ›å»ºè°ƒè¯•ä¼šè¯
./smart-screen.sh
# é€‰æ‹© 8 åˆ›å»º debug ä¼šè¯

# æ·»åŠ æ”¯æŒäººå‘˜æƒé™
screen -S debug -X acladd support +rwx

# ç”¨æˆ·å’Œæ”¯æŒäººå‘˜åŒæ—¶è¿æ¥
screen -S user/debug    # ç”¨æˆ·è¿æ¥
screen -S support/debug # æ”¯æŒäººå‘˜è¿æ¥
```

---

## âœ… éªŒè¯å¤šç”¨æˆ·åŠŸèƒ½

### è¿è¡Œæµ‹è¯•

```bash
./test_multiuser.sh
```

é¢„æœŸè¾“å‡ºï¼š
- âœ“ screen å·²å®‰è£…
- âœ“ screen æ”¯æŒ multiuser
- âœ“ .screenrc ä¸­å·²å¯ç”¨ multiuser
- âœ“ åˆ›å»ºæµ‹è¯•ä¼šè¯
- âœ“ å¯ç”¨ multiuser æ¨¡å¼
- âœ“ ACL å‘½ä»¤æ‰§è¡Œ
- âœ“ æ¸…ç†æµ‹è¯•ä¼šè¯

### æ£€æŸ¥ä¼šè¯çŠ¶æ€

```bash
screen -list
```

æ­£å¸¸è¾“å‡ºç¤ºä¾‹ï¼š
```
There are screens on:
  12345.dev (Attached)
  12345.dev (Detached)
2 Sockets in /run/screen/S-root.
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†æŒ‡å—**: `MULTIUSER_SETUP.md`
- **ä½¿ç”¨ç¤ºä¾‹**: `MULTIUSER_EXAMPLE.md`
- **å¿«é€ŸæŒ‡å—**: `MULTIUSER_QUICKSTART.md`
- **å·¥å…·è¯´æ˜**: `README_MULTIUSER.md`

---

## ğŸ‰ æ€»ç»“

âœ… **é¢„è®¾ä¼šè¯ç°åœ¨æ”¯æŒå¤šç”¨æˆ·åŠŸèƒ½ï¼**

- âœ… åˆ›å»ºä¼šè¯æ—¶è‡ªåŠ¨å¯ç”¨å¤šç”¨æˆ·æ¨¡å¼
- âœ… æ˜¾ç¤ºè¿æ¥ä¿¡æ¯å’Œæƒé™ç®¡ç†è¯´æ˜
- âœ… èœå•é€‰é¡¹æ”¯æŒå¤šç”¨æˆ·æƒé™ç®¡ç†
- âœ… æ‰€æœ‰ 1-9 é¢„è®¾ä¼šè¯éƒ½æ”¯æŒå¤šç”¨æˆ·

**ç«‹å³å¼€å§‹ä½¿ç”¨**ï¼š
```bash
./smart-screen.sh
# é€‰æ‹© 1 åˆ›å»º dev ä¼šè¯
# å…¶ä»–ç”¨æˆ·ä½¿ç”¨ screen -S username/dev è¿æ¥
```

**ä½¿ç”¨èœå•ç®¡ç†æƒé™**ï¼š
```bash
./smart-screen.sh
# é€‰æ‹© m è¿›å…¥å¤šç”¨æˆ·ç®¡ç†èœå•
```

---

*ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸš€*
