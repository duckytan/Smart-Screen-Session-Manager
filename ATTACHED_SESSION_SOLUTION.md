# âš ï¸ è§£å†³AttachedçŠ¶æ€ä¼šè¯é—®é¢˜

## ğŸ“‹ é—®é¢˜ç°è±¡

```
[root@VM-0-8-opencloudos ~]# screen -r "dev-å¼€å‘ç¯å¢ƒ"
There is a screen on:
    747706.dev-å¼€å‘ç¯å¢ƒ    (Multi, attached)
There is no screen to be resumed matching dev-å¼€å‘ç¯å¢ƒ.
```

## ğŸ” é—®é¢˜åŸå› 

**ä¼šè¯çŠ¶æ€**ï¼š`Multi, attached`

- `attached` = æœ‰ç”¨æˆ·æ­£åœ¨ä½¿ç”¨ä¸­
- å…¶ä»–ç”¨æˆ·æ— æ³•ç›´æ¥ä½¿ç”¨ `screen -r` è¿æ¥
- éœ€è¦å…ˆåˆ‡æ¢åˆ°å…±äº«æ¨¡å¼

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨ `screen -dRR`ï¼ˆæ¨èï¼‰

```bash
# ç”µè„‘Bæ‰§è¡Œï¼š
screen -dRR "dev-å¼€å‘ç¯å¢ƒ"
```

**ä½œç”¨**ï¼š
1. å…ˆdetachå½“å‰ç”¨æˆ·
2. ç„¶åattachæ–°ç”¨æˆ·
3. è®©å…¶ä»–ç”¨æˆ·èƒ½å¤Ÿè¿æ¥

**è¯¦ç»†è¿‡ç¨‹**ï¼š
```
ç”µè„‘A: screen -r "dev-å¼€å‘ç¯å¢ƒ"  (å·²è¿æ¥)

ç”µè„‘B: screen -dRR "dev-å¼€å‘ç¯å¢ƒ"
ç»“æœ:
  - ç”µè„‘Aè¢«detachï¼ˆçœ‹åˆ°æç¤ºï¼‰
  - ç”µè„‘BæˆåŠŸè¿æ¥
  
ç”µè„‘A: screen -r "dev-å¼€å‘ç¯å¢ƒ"
ç»“æœ:
  - ç”µè„‘Aä¹Ÿèƒ½è¿æ¥
  - ç°åœ¨æ˜¯å¤šäººå…±äº«çŠ¶æ€
```

### æ–¹æ¡ˆ2ï¼šå…ˆé€€å‡ºå†è¿æ¥

```bash
# æ­¥éª¤1ï¼šç”µè„‘Aé€€å‡º
# åœ¨ä¼šè¯ä¸­æŒ‰ï¼šCtrl+A D
# æˆ–åœ¨å‘½ä»¤è¡Œï¼šscreen -S "dev-å¼€å‘ç¯å¢ƒ" -X detach

# æ­¥éª¤2ï¼šç”µè„‘Bè¿æ¥
screen -r "dev-å¼€å‘ç¯å¢ƒ"

# æ­¥éª¤3ï¼šç”µè„‘Aé‡æ–°è¿æ¥
screen -r "dev-å¼€å‘ç¯å¢ƒ"
```

### æ–¹æ¡ˆ3ï¼šå¤šç”¨æˆ·ä¸“ç”¨æ ¼å¼

```bash
# å¦‚æœæ˜¯å¤šç”¨æˆ·æ¨¡å¼ï¼Œå°è¯•ï¼š
screen -S root/"dev-å¼€å‘ç¯å¢ƒ"

# æˆ–æŒ‡å®šç”¨æˆ·åæ ¼å¼ï¼š
screen -S <username>/"dev-å¼€å‘ç¯å¢ƒ"
```

## ğŸ¯ æœ€ä½³å®è·µ

### å¤šç”¨æˆ·åœºæ™¯ä¸‹çš„æ­£ç¡®æ“ä½œæµç¨‹

```bash
# 1. åˆ›å»ºä¼šè¯ï¼ˆåˆ†ç¦»çŠ¶æ€ï¼‰
screen -S "dev-å¼€å‘ç¯å¢ƒ" -d -m bash

# 2. å¯ç”¨å¤šç”¨æˆ·
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X multiuser on
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X acladd alice
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X acladd bob

# 3. ç”µè„‘Aè¿æ¥ï¼ˆç¬¬ä¸€ä¸ªç”¨æˆ·ï¼‰
screen -dRR "dev-å¼€å‘ç¯å¢ƒ"

# 4. ç”µè„‘Bè¿æ¥ï¼ˆç¬¬äºŒä¸ªç”¨æˆ·ï¼‰
screen -dRR "dev-å¼€å‘ç¯å¢ƒ"

# 5. éªŒè¯çŠ¶æ€
screen -list | grep "dev-å¼€å‘ç¯å¢ƒ"
```

### çŠ¶æ€éªŒè¯

```bash
screen -list | grep "dev-å¼€å‘ç¯å¢ƒ"
```

**æœŸæœ›ç»“æœ**ï¼š
```
<PID>.dev-å¼€å‘ç¯å¢ƒ    (Multi, detached)
```

å¦‚æœçœ‹åˆ° `attached`ï¼Œè¯´æ˜æœ‰ç”¨æˆ·æ­£åœ¨ä½¿ç”¨ï¼Œéœ€è¦ç”¨ `screen -dRR` æˆ–ç­‰å¾…ç”¨æˆ·é€€å‡ºã€‚

## ğŸ”§ æ•…éšœæ’é™¤

### Q: ä½¿ç”¨screen -dRRåä»ç„¶è¿æ¥å¤±è´¥

**A**: æ£€æŸ¥ç”¨æˆ·åæ ¼å¼
```bash
# å°è¯•æŒ‡å®šå®Œæ•´è·¯å¾„
screen -S root/"dev-å¼€å‘ç¯å¢ƒ"

# æˆ–æ£€æŸ¥æƒé™
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X acl
```

### Q: ä¼šè¯ä¸€ç›´æ˜¾ç¤ºattached

**A**: å¼ºåˆ¶é€€å‡ºæ‰€æœ‰è¿æ¥
```bash
# æŸ¥çœ‹æ‰€æœ‰è¿æ¥
screen -list

# å¼ºåˆ¶ç»ˆæ­¢
screen -X -S "dev-å¼€å‘ç¯å¢ƒ" quit

# é‡æ–°åˆ›å»º
screen -S "dev-å¼€å‘ç¯å¢ƒ" -d -m bash
```

### Q: å¤šç”¨æˆ·æ¨¡å¼å¤±æ•ˆ

**A**: é‡æ–°å¯ç”¨å¤šç”¨æˆ·
```bash
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X multiuser on
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X acladd alice
screen -S "dev-å¼€å‘ç¯å¢ƒ" -X acladd bob
```

## ğŸ“ æ€»ç»“

**å…³é”®å‘½ä»¤**ï¼š
- `screen -dRR <session>` - å¼ºåˆ¶é‡æ–°è¿æ¥ï¼ˆå¤šç”¨æˆ·æ¨èï¼‰
- `screen -r <session>` - æ¢å¤ä¼šè¯ï¼ˆå•ç”¨æˆ·ï¼‰
- `Ctrl+A D` - é€€å‡ºä¼šè¯

**å¤šç”¨æˆ·è¿æ¥æ­¥éª¤**ï¼š
1. ç¡®ä¿ä¼šè¯å¤„äº `detached` çŠ¶æ€
2. ç¬¬ä¸€ä¸ªç”¨æˆ·ç”¨ `screen -dRR` è¿æ¥
3. åç»­ç”¨æˆ·ç”¨ `screen -dRR` è¿æ¥
4. éªŒè¯æ˜¾ç¤º `Multi, detached`

---

**å½“å‰é—®é¢˜**ï¼šä¼šè¯å¤„äºattachedçŠ¶æ€  
**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `screen -dRR` æˆ–å…ˆdetachå½“å‰ç”¨æˆ·  
**æ¨èå‘½ä»¤**ï¼š`screen -dRR "dev-å¼€å‘ç¯å¢ƒ"`
