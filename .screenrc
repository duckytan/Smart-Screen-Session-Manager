################################################################################
# Smart Screen Session Manager v2.0 - Screen 配置文件
# 简化提示符：只显示 [会话名称]用户@主机
# 移除所有多余的screen标识和路径信息
################################################################################

# ================================
# 基础配置
# ================================

# 启用多用户模式
multiuser on

# 启用视觉铃声
vbell on
vbell_msg "bell"

# 启动时不显示欢迎信息
startup_message off

# 禁用自动回绕
defwrap on

# 设置屏幕缓冲行数
defscrollback 10000

# 启用UTF-8
defutf8 on

# ================================
# 简洁提示符配置
# ================================

# 设置简洁的硬状态栏
# 只显示会话名称、用户和主机
hardstatus alwayslastline
hardstatus string '%{= kG}[%{G}%S%{g}]%{W} %H %{g}%'

# 禁用默认硬状态栏标题
defhstatus ""

# 设置窗口标题格式
shelltitle "$ |"

# 禁用自动标题设置
termcapinfo screen* 'hs:ts=\E]0;:fs=\007:ds=\E]0;screen\007'

# ================================
# 快捷键配置
# ================================

# 窗口切换快捷键
bindkey -k k9 select 0
bindkey -k k; select 1
bindkey -k F1 select 0
bindkey -k F2 select 1
bindkey -k F3 select 2
bindkey -k F4 select 3
bindkey -k F5 select 4
bindkey -k F6 select 5
bindkey -k F7 select 6
bindkey -k F8 select 7
bindkey -k F9 select 8
bindkey -k F10 select 9

# 分离快捷键
bind s detach

# 退出快捷键
bind k kill
bind ^k kill
bind \\ quit

# 重新连接快捷键
bind r screen -dRR

# ================================
# 状态栏配置
# ================================

# 状态栏已在上面配置为简洁格式
# 如需详细状态栏，取消下面注释并注释上面配置
# hardstatus alwayslastline
# hardstatus string '%{= kG}[ %{G}%H %{g}][%= %{= kw}%?%-Lw%?%{r}(%{W}%n*%f%t%?(%u)%?%{r})%{w}%?%+Lw%?%?%= %{g}][%{B} %m-%d %{W}%c %{g}]'

# ================================
# 终端优化
# ================================

# 启用鼠标支持
termcapinfo xterm* ti@:te@

# 启用日志功能
deflog on
logfile /tmp/screen-%n.log

# 设置默认终端类型
term screen-256color

# 启用自动分离
autodetach on
